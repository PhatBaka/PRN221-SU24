@page
@model UI.Pages.Orders.CartModel

@{
    ViewData["Title"] = "Your Cart";
    Layout = "_Layout";
}

<h1 class="my-4">Your Cart</h1>

@if (Model.CartItems.Count == 0)
{
    <div class="alert alert-info" role="alert">
        Your cart is empty.
    </div>
}
else
{
    <form method="post">
        <div class="table-responsive">
            <table class="table table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>Jewelry Name</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Total Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @for (int i = 0; i < Model.CartItems.Count; i++)
                    {
                        <tr>
                            <td>
                                @Model.CartItems[i].Jewelry.JewelryName
                                <input type="hidden" name="CartItems[@i].Jewelry.JewelryId" value="@Model.CartItems[i].Jewelry.JewelryId" />
                            </td>
                            <td>
                                <input type="number" name="CartItems[@i].Quantity" value="@Model.CartItems[i].Quantity" min="1" class="form-control" />
                            </td>
                            <td>@Model.CartItems[i].Jewelry.LaborPrice.ToString("C")</td>
                            <td>@(Model.CartItems[i].Quantity * Model.CartItems[i].Jewelry.LaborPrice).ToString("C")</td>
                            <td>
                                <button type="submit" asp-page-handler="Remove" asp-route-id="@Model.CartItems[i].Jewelry.JewelryId" class="btn btn-danger btn-sm">Remove</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        <div class="d-flex justify-content-end mt-4">
            <button type="submit" asp-page-handler="SubmitOrder" class="btn btn-primary btn-lg">Proceed to Checkout</button>
        </div>
    </form>
}
